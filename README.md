<h4 align="center">Trilateration Coordinate Finder</h4>

<p align="center">
<a href=""><img src="https://img.shields.io/badge/Python-blue"></a>
<a href=""><img src="https://img.shields.io/badge/Cartography-orange"></a>
</p>

<br>

<p align="center">
<a href=""><img src="https://img.shields.io/github/release/LOKAI77/Coordfinder"></a>
</p>

# ABOUT

This script focuses on finding an unknown location α in format `lat, lng` based on three reference points ωₙ it is given and their known distance Δₙ to said unknown location α. Script is divided into two phases. In `Phase 1` script tries to calculate rough estimate of α using `Vincenty's Formula` which should be more suitable for longer distances and various other methods for general and local search (`Nelder-Mead, Powell, CG, BFGS, L-BFGS-B`), result from `Phase 1` is automatically passed into `Phase 2` which uses `Haversine Formula` instead for better local refinement, since it is more precise at calculating distance over shorter distances. `Phase 2` makes a use of custom recursive local search refinement algorithm (`RLSF`) for sub-atomic precision (able to match 13 decimal places with location α).

#### Recursive Local Search Refinement Algorithm

**Main principle**:  
- Takes the rough α estimate from `Phase 1` as a starting point.  
- Calculates 152 new candidate coordinates Ωₙ around it in all 8 cardinal directions in radiuses from `1e-17m` - `10Km`  
- Compares the distance θₙ between each Ωₙ and each ωₙ  
- Picks the best candidate Ωₙ with the best improvement towards Δₙ distance (with least error)  
- Sets the best candidate Ωₙ as new starting point  
- Repeats process until no improvement or until it hits upper boundary of 1000 iterations

##### Visual explanation (Simplified):
α - Location we are looking for (unknown location)

ω₁ - ω₃ - Reference points (known location) picked randomly, their exact value is not important however, they should be on different continents at least, if they are the same, or lie very close to each other, it could create inaccuracies due to concentric error distance, shallow intersection angles and loss of comparison ability

Δ₁ - Δ₃ - Reference distances (known distance). Distance of each ωₙ to α in meters

Ω₁ - Ω₁₅₂ - Answer candidate generated by Phase 2 (8 cardinal directions * 19 radius ranges)

θ₁ - θ₃ - Calculated distances from Ωₙ to ωₙ compared with Δₙ (Each new candidate Ωₙ has three distances to reference points ωₙ)

The closer the θₙ gets to Δₙ the closer the coordinate is to unknown location α, in another words we are trying to match our calculated distances from candidates Ωₙ to reference points ωₙ with distance from reference points ωₙ to unknown location α

<br>

<h1 align="center">
  <img src="https://i.ibb.co/sdcD6Knq/Drawing-2025-05-02-15-38-38-excalidraw.png" alt="Drawing-2025-05-02-15-38-38-excalidraw" border="0" width="1000px">
  <br>
</h1>

# USAGE

Three coordinates in `lat, lng` format + their distance to α (9 numbers in total) are required

```shell
════════════════════════════════════════════════════════════
                   REFERENCE POINTS INPUT
════════════════════════════════════════════════════════════

▶ Reference Point 1:
  Enter latitude for point 1 (degrees): -19.16106875523742
  Enter longitude for point 1 (degrees): 124.55119165182701
  Enter distance to unknown point (meters): 13679680.6299299970269203
  ✓ Reference point 1 registered

▶ Reference Point 2:
  Enter latitude for point 2 (degrees): 69.40532193062066
  Enter longitude for point 2 (degrees): 20.84025686676666
  Enter distance to unknown point (meters): 2065165.7984161919448525
  ✓ Reference point 2 registered

▶ Reference Point 3:
  Enter latitude for point 3 (degrees): -10.677149707379083
  Enter longitude for point 3 (degrees): -47.53865009937881
  Enter distance to unknown point (meters): 8602619.6705166343599558
  ✓ Reference point 3 registered
```

